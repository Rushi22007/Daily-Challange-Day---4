#include<stdio.h>

long long maxMatrixSum(int** matrix, int matrixSize, int* matrixColSize) {
    long long total = 0;
    int neg = 0;
    long long smallest = 1000000000;

    for (int i = 0; i < matrixSize; i++) {
        for (int j = 0; j < matrixColSize[i]; j++) {
            long long x = matrix[i][j];

            if (x < 0)
                neg++;

            if (llabs(x) < smallest)
                smallest = llabs(x);

            total += llabs(x);
        }
    }

    if (neg % 2 == 1)
        total -= 2 * smallest;

    return total;
}
