#include <stdlib.h>

int cmp(const void *a, const void *b)
{
    return (*(int **)a)[0] - (*(int **)b)[0];
}

int bs(int **e, int n, int t)
{
    int l = 0, r = n - 1;
    while (l <= r)
    {
        int m = (l + r) / 2;
        if (e[m][0] >= t) r = m - 1;
        else l = m + 1;
    }
    return l < n ? l : -1;
}

int maxTwoEvents(int **events, int eventsSize, int *eventsColSize)
{
    qsort(events, eventsSize, sizeof(int *), cmp);

    int s[eventsSize];
    s[eventsSize - 1] = events[eventsSize - 1][2];

    for (int i = eventsSize - 2; i >= 0; i--)
        s[i] = s[i + 1] > events[i][2] ? s[i + 1] : events[i][2];

    int ans = 0;

    for (int i = 0; i < eventsSize; i++)
    {
        int v = events[i][2];
        int j = bs(events, eventsSize, events[i][1] + 1);
        if (j != -1) v += s[j];
        if (v > ans) ans = v;
    }

    return ans;
}
